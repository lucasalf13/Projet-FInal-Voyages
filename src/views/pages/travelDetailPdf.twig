<!DOCTYPE html>
<html lang="{{ app.language|default('fr') }}">
	<head>
		<meta charset="UTF-8"/>
		<title>{{ t('trip') }}
			:
			{{ voyage.name }}</title>
		<style>
			@page {
				size: A4;
				margin: 10mm;
			}

			br {
				display: none;
			}

			a {
				color: #1a0dab;
				text-decoration: underline;
				word-break: break-all;
			}

			body {
				margin: 0;
				padding: 0;
				font-family: 'Lora', serif;
				background: #fff;
				color: #2f4f2f;
				font-size: 10.5pt;
				line-height: 1.2;
				-webkit-print-color-adjust: exact;
				display: flex;
				justify-content: center;
			}


			.pdf-container {
				max-width: 190mm;
				width: 100%;
				display: flex;
				flex-wrap: wrap;
				gap: 6mm;
			}

			h1 {
				width: 100%;
				font-weight: 700;
				font-size: 16pt;
				text-align: center;
				margin-bottom: 8pt;
				color: #3a6b35;
			}

			.pdf-column {
				flex: 1 1 48%;
				display: flex;
				flex-direction: column;
				gap: 6pt;
			}

			.pdf-section {
				background: #ecf6ec;
				padding: 6pt 10pt;
				border-radius: 4pt;
				page-break-inside: avoid;
			}

			.pdf-label {
				font-weight: 700;
				font-size: 10.5pt;
				margin-bottom: 3pt;
				color: #3a6b35;
			}

			.pdf-content {
				white-space: pre-wrap;
				font-weight: 400;
				font-size: 10pt;
				color: #1f331f;
			}

			strong {
				font-weight: 600;
			}

			em {
				color: #556b55;
				font-style: italic;
			}

			.item-inline {
				display: inline-block;
				margin-right: 6pt;
				white-space: nowrap;
			}
		</style>

		<link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet"/>
	</head>

	<body>
		<div class="pdf-container">
			<h1>{{ voyage.name }}</h1>

			<div class="pdf-column">
				<div class="pdf-section">
					<span class="pdf-label">{{ t('itinerary') }}
						:</span>
					<div class="pdf-content">
						{% set keys = ['itinerary.title1', 'itinerary.title2', 'itinerary.title3'] %}
						{% for itin in voyage.itineraries %}
							<strong>{{ t(keys[loop.index0]) }}:</strong>
							{{ attribute(itin, 'detail_' ~ lng)|default(itin.detail_fr)|striptags }}
						{% endfor %}
					</div>
				</div>
			</div>

			<div class="pdf-column">
				<div class="pdf-section">
					<span class="pdf-label">{{ t('ou_dormir') }}
						:</span>
					<div class="pdf-content">
						{% for acc in voyage.accommodations %}
							<span class="item-inline">
								<strong>{{ acc.title }}</strong>
								{{ acc.priceCategory == 'EURO' ? '€' : acc.priceCategory == 'TWO_EURO' ? '€€' : '€€€' }}
								{% if acc.url %}
									<a href="{{ acc.url }}" target="_blank">[lien direct]</a>
								{% endif %}
							</span>
						{% endfor %}
					</div>
				</div>


				<div class="pdf-section">
					<span class="pdf-label">{{ t('ou_manger') }}
						:</span>
					<div class="pdf-content">
						{% for resto in voyage.restaurants %}
							<span class="item-inline">
								<strong>{{ resto.title }}</strong>
								{{ resto.priceCategory == 'EURO' ? '€' : resto.priceCategory == 'TWO_EURO' ? '€€' : '€€€' }}
								{% if resto.url %}
									<a href="{{ resto.url }}" target="_blank">[lien direct]</a>
								{% endif %}
							</span>
						{% endfor %}
					</div>
				</div>

				<div class="pdf-section">
					<span class="pdf-label">{{ t('transports') }}
						:</span>
					<div class="pdf-content">
						{% for transport in voyage.transports %}
							{% set type = transport.type|lower %}
							<strong>
								{% if type == 'commun' %}
									{{ t('transports_en_commun') }}
								{% elseif type == 'velo' %}
									{{ t('velo') }}
								{% else %}
									{{ transport.type|capitalize }}
								{% endif %}
							</strong>:
							{{ attribute(transport, 'detail_' ~ lng)|default(transport.detail_fr)|striptags }}
						{% endfor %}

					</div>
				</div>
			</div>
		</div>
	</body>
</html>
